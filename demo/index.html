<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>DarkroomJS</title>
  <link rel="stylesheet" href="./build/darkroom.css">
  <link rel="stylesheet" href="./css/page.css">
</head>
<body>


  <div id="content">
    <div class="container">
      <section class="copy">
        <h1 style="color:#444">Choice visual feature select page</h1>
        <div class="figure-wrapper">
          <figure class="image-container target">
            <img src="http://s7d2.scene7.com/is/image/rue21/0284_001846_0001505_0042_m" alt="DomoKun" id="target">
          </figure>
        </div>
        <button onclick="getResults();">Get Results</button>
        <button onclick="destroySelection();">Destroy selection</button>
      </section>
    </div>
  </div>

  <script src="./vendor/fabric2.js"></script>
  <script src="./build/darkroom.js"></script>

  <script>

    window._choicesrv = "//data.choice.ai";
    function destroySelection(){
      dkrm.selfDestroy();
      alert ("Destroying dark room");
    }


    function getResults(){
      var selectPlugin = dkrm.plugins['select'];
      if(selectPlugin){
        var s = selectPlugin.selectCurrentZone();
        console.log(s)
      }
      else{
        alert ("failed to get results");
      }
    }
    var selectPlugin = null;
    var dkrm = new Darkroom('#target', {
      // Size options
      minWidth: 100,
      minHeight: 100,
      maxWidth: 600,
      maxHeight: 500,
      ratio: 4/3,
      backgroundColor: '#000',

      // Plugins options
      plugins: {
        select: {
          quickSelectKey: 67, //key "c"
          minHeight: 50,
          minWidth: 50
          //ratio: 4/3
        }
      },

      // Post initialize script
      initialize: function() {
        var selectPlugin = this.plugins['select'];
        selectPlugin.requireFocus();
        //selectPlugin.selectZone(100, 25, 10, 10);
      }
    });
  </script>


</body>
</html>
